var filesToCache = ["/.","/build/bundle.js","/css/styles.css","/images/emojione/1f31c.svg","/images/emojione/1f31d.svg","/images/emojione/1f32a.svg","/images/emojione/1f32b.svg","/images/emojione/1f32d.svg","/images/emojione/1f32e.svg","/images/emojione/1f32f.svg","/images/emojione/1f332.svg","/images/emojione/1f333.svg","/images/emojione/1f334.svg","/images/emojione/1f335.svg","/images/emojione/1f336.svg","/images/emojione/1f337.svg","/images/emojione/1f339.svg","/images/emojione/1f33c.svg","/images/emojione/1f345.svg","/images/emojione/1f346.svg","/images/emojione/1f347.svg","/images/emojione/1f349.svg","/images/emojione/1f34a.svg","/images/emojione/1f34b.svg","/images/emojione/1f34c.svg","/images/emojione/1f34d.svg","/images/emojione/1f34e.svg","/images/emojione/1f350.svg","/images/emojione/1f352.svg","/images/emojione/1f354.svg","/images/emojione/1f355.svg","/images/emojione/1f357.svg","/images/emojione/1f35e.svg","/images/emojione/1f35f.svg","/images/emojione/1f363.svg","/images/emojione/1f364.svg","/images/emojione/1f366.svg","/images/emojione/1f367.svg","/images/emojione/1f368.svg","/images/emojione/1f369.svg","/images/emojione/1f36a.svg","/images/emojione/1f36b.svg","/images/emojione/1f36d.svg","/images/emojione/1f36f.svg","/images/emojione/1f370.svg","/images/emojione/1f373.svg","/images/emojione/1f377.svg","/images/emojione/1f378.svg","/images/emojione/1f379.svg","/images/emojione/1f37a.svg","/images/emojione/1f37b.svg","/images/emojione/1f37c.svg","/images/emojione/1f37e.svg","/images/emojione/1f37f.svg","/images/emojione/1f380.svg","/images/emojione/1f381.svg","/images/emojione/1f382.svg","/images/emojione/1f383.svg","/images/emojione/1f384.svg","/images/emojione/1f385.svg","/images/emojione/1f386.svg","/images/emojione/1f388.svg","/images/emojione/1f389.svg","/images/emojione/1f392.svg","/images/emojione/1f393.svg","/images/emojione/1f396.svg","/images/emojione/1f399.svg","/images/emojione/1f3a3.svg","/images/emojione/1f3a4.svg","/images/emojione/1f3a5.svg","/images/emojione/1f3a7.svg","/images/emojione/1f3a8.svg","/images/emojione/1f3a9.svg","/images/emojione/1f3ac.svg","/images/emojione/1f3ad.svg","/images/emojione/1f3ae.svg","/images/emojione/1f3b3.svg","/images/emojione/1f3b5.svg","/images/emojione/1f3b7.svg","/images/emojione/1f3b8.svg","/images/emojione/1f3ba.svg","/images/emojione/1f3bc.svg","/images/emojione/1f3bd.svg","/images/emojione/1f3be.svg","/images/emojione/1f3c0.svg","/images/emojione/1f3c5.svg","/images/emojione/1f3c6.svg","/images/emojione/1f3c8.svg","/images/emojione/1f3d3.svg","/images/emojione/1f3f9.svg","/images/emojione/1f400.svg","/images/emojione/1f401.svg","/images/emojione/1f402.svg","/images/emojione/1f403.svg","/images/emojione/1f404.svg","/images/emojione/1f405.svg","/images/emojione/1f406.svg","/images/emojione/1f407.svg","/images/emojione/1f408.svg","/images/emojione/1f409.svg","/images/emojione/1f40a.svg","/images/emojione/1f40b.svg","/images/emojione/1f40c.svg","/images/emojione/1f40d.svg","/images/emojione/1f40e.svg","/images/emojione/1f40f.svg","/images/emojione/1f410.svg","/images/emojione/1f411.svg","/images/emojione/1f412.svg","/images/emojione/1f413.svg","/images/emojione/1f414.svg","/images/emojione/1f415.svg","/images/emojione/1f416.svg","/images/emojione/1f417.svg","/images/emojione/1f418.svg","/images/emojione/1f419.svg","/images/emojione/1f41b.svg","/images/emojione/1f41c.svg","/images/emojione/1f41d.svg","/images/emojione/1f41e.svg","/images/emojione/1f41f.svg","/images/emojione/1f420.svg","/images/emojione/1f421.svg","/images/emojione/1f422.svg","/images/emojione/1f423.svg","/images/emojione/1f424.svg","/images/emojione/1f425.svg","/images/emojione/1f426.svg","/images/emojione/1f427.svg","/images/emojione/1f428.svg","/images/emojione/1f429.svg","/images/emojione/1f42a.svg","/images/emojione/1f42b.svg","/images/emojione/1f42d.svg","/images/emojione/1f42e.svg","/images/emojione/1f42f.svg","/images/emojione/1f430.svg","/images/emojione/1f431.svg","/images/emojione/1f432.svg","/images/emojione/1f433.svg","/images/emojione/1f434.svg","/images/emojione/1f435.svg","/images/emojione/1f436.svg","/images/emojione/1f437.svg","/images/emojione/1f438.svg","/images/emojione/1f439.svg","/images/emojione/1f43a.svg","/images/emojione/1f43b.svg","/images/emojione/1f43c.svg","/images/emojione/1f43d.svg","/images/emojione/1f43f.svg","/images/emojione/1f440.svg","/images/emojione/1f442.svg","/images/emojione/1f443.svg","/images/emojione/1f444.svg","/images/emojione/1f445.svg","/images/emojione/1f446.svg","/images/emojione/1f447.svg","/images/emojione/1f448.svg","/images/emojione/1f449.svg","/images/emojione/1f44a.svg","/images/emojione/1f44b.svg","/images/emojione/1f44c.svg","/images/emojione/1f44d.svg","/images/emojione/1f44e.svg","/images/emojione/1f44f.svg","/images/emojione/1f450.svg","/images/emojione/1f451.svg","/images/emojione/1f452.svg","/images/emojione/1f453.svg","/images/emojione/1f455.svg","/images/emojione/1f456.svg","/images/emojione/1f457.svg","/images/emojione/1f458.svg","/images/emojione/1f459.svg","/images/emojione/1f45a.svg","/images/emojione/1f45b.svg","/images/emojione/1f45c.svg","/images/emojione/1f462.svg","/images/emojione/1f466.svg","/images/emojione/1f467.svg","/images/emojione/1f468.svg","/images/emojione/1f469.svg","/images/emojione/1f46e.svg","/images/emojione/1f470.svg","/images/emojione/1f471.svg","/images/emojione/1f472.svg","/images/emojione/1f473.svg","/images/emojione/1f474.svg","/images/emojione/1f475.svg","/images/emojione/1f476.svg","/images/emojione/1f477.svg","/images/emojione/1f478.svg","/images/emojione/1f479.svg","/images/emojione/1f47d.svg","/images/emojione/1f480.svg","/images/emojione/1f482.svg","/images/emojione/1f484.svg","/images/emojione/1f489.svg","/images/emojione/1f48b.svg","/images/emojione/1f48d.svg","/images/emojione/1f48e.svg","/images/emojione/1f490.svg","/images/emojione/1f493.svg","/images/emojione/1f494.svg","/images/emojione/1f498.svg","/images/emojione/1f49a.svg","/images/emojione/1f49b.svg","/images/emojione/1f49c.svg","/images/emojione/1f4a1.svg","/images/emojione/1f4a5.svg","/images/emojione/1f4a7.svg","/images/emojione/1f4a8.svg","/images/emojione/1f4a9.svg","/images/emojione/1f4aa.svg","/images/emojione/1f4ad.svg","/images/emojione/1f4af.svg","/images/emojione/1f4b0.svg","/images/emojione/1f4b5.svg","/images/emojione/1f4b8.svg","/images/emojione/1f4cb.svg","/images/emojione/1f4cc.svg","/images/emojione/1f4ce.svg","/images/emojione/1f4cf.svg","/images/emojione/1f4db.svg","/images/emojione/1f4de.svg","/images/emojione/1f4e2.svg","/images/emojione/1f4e3.svg","/images/emojione/1f4ef.svg","/images/emojione/1f4f1.svg","/images/emojione/1f4f7.svg","/images/emojione/1f4fa.svg","/images/emojione/1f506.svg","/images/emojione/1f50e.svg","/images/emojione/1f512.svg","/images/emojione/1f514.svg","/images/emojione/1f525.svg","/images/emojione/1f526.svg","/images/emojione/1f528.svg","/images/emojione/1f576.svg","/images/emojione/1f577.svg","/images/emojione/1f578.svg","/images/emojione/1f579.svg","/images/emojione/1f58a.svg","/images/emojione/1f58b.svg","/images/emojione/1f58c.svg","/images/emojione/1f58d.svg","/images/emojione/1f590.svg","/images/emojione/1f596.svg","/images/emojione/1f5ef.svg","/images/emojione/1f600.svg","/images/emojione/1f601.svg","/images/emojione/1f602.svg","/images/emojione/1f603.svg","/images/emojione/1f604.svg","/images/emojione/1f605.svg","/images/emojione/1f606.svg","/images/emojione/1f607.svg","/images/emojione/1f608.svg","/images/emojione/1f609.svg","/images/emojione/1f60a.svg","/images/emojione/1f60b.svg","/images/emojione/1f60c.svg","/images/emojione/1f60d.svg","/images/emojione/1f60e.svg","/images/emojione/1f60f.svg","/images/emojione/1f610.svg","/images/emojione/1f611.svg","/images/emojione/1f612.svg","/images/emojione/1f613.svg","/images/emojione/1f614.svg","/images/emojione/1f615.svg","/images/emojione/1f616.svg","/images/emojione/1f617.svg","/images/emojione/1f618.svg","/images/emojione/1f619.svg","/images/emojione/1f61a.svg","/images/emojione/1f61b.svg","/images/emojione/1f61c.svg","/images/emojione/1f61d.svg","/images/emojione/1f61e.svg","/images/emojione/1f61f.svg","/images/emojione/1f620.svg","/images/emojione/1f621.svg","/images/emojione/1f622.svg","/images/emojione/1f623.svg","/images/emojione/1f624.svg","/images/emojione/1f625.svg","/images/emojione/1f626.svg","/images/emojione/1f627.svg","/images/emojione/1f628.svg","/images/emojione/1f629.svg","/images/emojione/1f62a.svg","/images/emojione/1f62b.svg","/images/emojione/1f62c.svg","/images/emojione/1f62d.svg","/images/emojione/1f62e.svg","/images/emojione/1f62f.svg","/images/emojione/1f630.svg","/images/emojione/1f631.svg","/images/emojione/1f632.svg","/images/emojione/1f633.svg","/images/emojione/1f634.svg","/images/emojione/1f635.svg","/images/emojione/1f636.svg","/images/emojione/1f637.svg","/images/emojione/1f638.svg","/images/emojione/1f639.svg","/images/emojione/1f63a.svg","/images/emojione/1f63b.svg","/images/emojione/1f63c.svg","/images/emojione/1f63d.svg","/images/emojione/1f63e.svg","/images/emojione/1f63f.svg","/images/emojione/1f640.svg","/images/emojione/1f641.svg","/images/emojione/1f642.svg","/images/emojione/1f643.svg","/images/emojione/1f644.svg","/images/emojione/1f648.svg","/images/emojione/1f649.svg","/images/emojione/1f64a.svg","/images/emojione/1f64c.svg","/images/emojione/1f64f.svg","/images/emojione/1f680.svg","/images/emojione/1f681.svg","/images/emojione/1f682.svg","/images/emojione/1f6a8.svg","/images/emojione/1f910.svg","/images/emojione/1f911.svg","/images/emojione/1f912.svg","/images/emojione/1f913.svg","/images/emojione/1f914.svg","/images/emojione/1f915.svg","/images/emojione/1f916.svg","/images/emojione/1f917.svg","/images/emojione/1f918.svg","/images/emojione/1f919.svg","/images/emojione/1f91a.svg","/images/emojione/1f91b.svg","/images/emojione/1f91c.svg","/images/emojione/1f91e.svg","/images/emojione/1f920.svg","/images/emojione/1f921.svg","/images/emojione/1f922.svg","/images/emojione/1f923.svg","/images/emojione/1f924.svg","/images/emojione/1f925.svg","/images/emojione/1f926.svg","/images/emojione/1f934.svg","/images/emojione/1f936.svg","/images/emojione/1f947.svg","/images/emojione/1f948.svg","/images/emojione/1f949.svg","/images/emojione/1f950.svg","/images/emojione/1f951.svg","/images/emojione/1f953.svg","/images/emojione/1f954.svg","/images/emojione/1f955.svg","/images/emojione/1f956.svg","/images/emojione/1f957.svg","/images/emojione/1f958.svg","/images/emojione/1f959.svg","/images/emojione/1f960.svg","/images/emojione/1f980.svg","/images/emojione/1f981.svg","/images/emojione/1f982.svg","/images/emojione/1f983.svg","/images/emojione/1f984.svg","/images/emojione/1f985.svg","/images/emojione/1f986.svg","/images/emojione/1f987.svg","/images/emojione/1f988.svg","/images/emojione/1f989.svg","/images/emojione/1f98a.svg","/images/emojione/1f98c.svg","/images/emojione/1f98d.svg","/images/emojione/1f98e.svg","/images/emojione/1f98f.svg","/images/emojione/1f990.svg","/images/emojione/1f991.svg","/images/emojione/1f9c0.svg","/images/emojione/2049.svg","/images/emojione/23f0.svg","/images/emojione/23f1.svg","/images/emojione/23f3.svg","/images/emojione/2600.svg","/images/emojione/2601.svg","/images/emojione/2602.svg","/images/emojione/2603.svg","/images/emojione/2604.svg","/images/emojione/260e.svg","/images/emojione/2614.svg","/images/emojione/2615.svg","/images/emojione/2618.svg","/images/emojione/261d.svg","/images/emojione/2620.svg","/images/emojione/2622.svg","/images/emojione/262a.svg","/images/emojione/262e.svg","/images/emojione/262f.svg","/images/emojione/2639.svg","/images/emojione/263a.svg","/images/emojione/2660.svg","/images/emojione/2663.svg","/images/emojione/2665.svg","/images/emojione/2666.svg","/images/emojione/2692.svg","/images/emojione/2693.svg","/images/emojione/2694.svg","/images/emojione/2696.svg","/images/emojione/2699.svg","/images/emojione/26a0.svg","/images/emojione/26a1.svg","/images/emojione/26bd.svg","/images/emojione/26c4.svg","/images/emojione/26c5.svg","/images/emojione/26c8.svg","/images/emojione/26d1.svg","/images/emojione/26d4.svg","/images/emojione/2702.svg","/images/emojione/2708.svg","/images/emojione/270a.svg","/images/emojione/270b.svg","/images/emojione/270c.svg","/images/emojione/270d.svg","/images/emojione/270f.svg","/images/emojione/2744.svg","/images/emojione/274c.svg","/images/emojione/2753.svg","/images/emojione/2754.svg","/images/emojione/2755.svg","/images/emojione/2757.svg","/images/emojione/2764.svg","/images/emojione/2b50.svg","/images/iconic/arrow-left.svg","/images/iconic/camera-slr.svg","/images/iconic/data-transfer-download.svg","/images/iconic/trash.svg","/images/twitter-logo.svg","/images/homescreen/144.png","/images/homescreen/168.png","/images/homescreen/192.png","/images/homescreen/48.png","/images/homescreen/72.png","/images/homescreen/96.png","/images/logo-transparent.png","/sounds/camera.wav"];

const CACHE_NAME = 'cache-v1';

self.addEventListener('install', event => {

  function onInstall () {

    console.log('Service worker installation', CACHE_NAME);

    return caches.open(CACHE_NAME)
      .then(cache => {
        console.log('Caching pre-defined assets on installation...', filesToCache);
        return cache.addAll( filesToCache )
          .then(() => {
            console.log('Cached files, now cache external resources...');
            return cache.add('https://fonts.googleapis.com/css?family=Open+Sans:400,700,300,400italic,700italic,300italic,600,600italic,800,800italic');
          });
      });
  }

  event.waitUntil(onInstall(event));
});

self.addEventListener('fetch', event => {

  // Clone so we can consume it more than once
  let fetchRequest = event.request.clone();

  // If we can fetch latest version, then do so
  return fetch(fetchRequest)
    .then(response => {

      if (!response || response.status >= 300 || response.type !== 'basic') {
        // Don't cache response if it's not within our domain or not 2xx status
        return response;
      }

      let responseToCache = response.clone();

      caches.open(CACHE_NAME)
        .then(cache => {
          cache.put(event.request, responseToCache);
        });

      return response;
    })
    .catch(err => {

      // Fetch failed. Maybe we're offline. Try the cache.
      console.log('Fetch failed, try cache', err);

      event.respondWith(
        caches.match(event.request)
          .then(response => {
              if (response) {
                console.log('Cache hit', event.request);
                return response;
              } else {
                console.log('Offline cache miss =(');
              }
            }
          )
      );

    });

});

// Clear out old versions
self.addEventListener('activate', function(event) {
  const cacheWhitelist = [CACHE_NAME];

  event.waitUntil(
    caches.keys(cacheNames => {
      return Promise.all(
        cacheNames.map(cacheName => {
          if (cacheWhitelist.indexOf(cacheName) == -1) {
            return caches.delete(cacheName);
          }
        })
      );
    })
  );
});